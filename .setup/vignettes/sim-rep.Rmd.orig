---
title: "Single Replication from the Simulation Study"
author: "Ivan Jacob Agaloos Pesigan"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Single Replication from the Simulation Study}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r}
#| include = FALSE
knitr::opts_chunk$set(
  collapse = TRUE,
  fig.path = "fig-vignettes-sim-rep-",
  fig.cap = "",
  fig.width = 11,
  fig.height = 8,
  fig.retina = 2,
  dpi = 300,
  comment = "#>",
  dev = "ragg_png"
)
```

```{r}
#| message = FALSE
library(manMetaVAR)
```

```{r}
#| include = FALSE
root <- rprojroot::is_rstudio_project
data_raw <- root$find_file(
  ".setup",
  "data-raw"
)
if (!dir.exists(data_raw)) {
  dir.create(data_raw, recursive = TRUE)
}
```

```{r}
#| include = FALSE
fn_data <- root$find_file(
  ".setup",
  "data-raw",
  "sim-rep-data.Rds"
)
if (!file.exists(fn_data)) {
  taskid <- 9
  seed <- 42
  set.seed(seed)
  data <- GenData(taskid = taskid)
  saveRDS(data, file = fn_data)
}
data <- readRDS(fn_data)
```

```{r}
#| include = FALSE
fn_dtvar <- root$find_file(
  ".setup",
  "data-raw",
  "sim-rep-dtvar.Rds"
)
if (!file.exists(fn_dtvar)) {
  dtvar <- FitDTVAR(data)
  saveRDS(dtvar, file = fn_dtvar)
}
dtvar <- readRDS(fn_dtvar)
```

```{r}
#| include = FALSE
fn_metavar <- root$find_file(
  ".setup",
  "data-raw",
  "sim-rep-metavar.Rds"
)
if (!file.exists(fn_metavar)) {
  metavar <- FitMetaVAR(dtvar)
  saveRDS(metavar, file = fn_metavar)
}
metavar <- readRDS(fn_metavar)
```

```{r}
#| include = FALSE
fn_mlvar <- root$find_file(
  ".setup",
  "data-raw",
  "sim-rep-mlvar.Rds"
)
if (!file.exists(fn_mlvar)) {
  mlvar <- FitMLVAR(data)
  saveRDS(mlvar, file = fn_mlvar)
}
mlvar <- readRDS(fn_mlvar)
```

```{r}
#| include = FALSE
fn_jags <- root$find_file(
  ".setup",
  "data-raw",
  "sim-rep-jags.Rds"
)
if (!file.exists(fn_jags)) {
  jags <- FitJAGS(data)
  saveRDS(jags, file = fn_jags)
}
jags <- readRDS(fn_jags)
```

## Data Generation

```{r}
#| eval = FALSE
taskid <- 9
seed <- 42
set.seed(seed)
data <- GenData(taskid = taskid)
```

```{r}
plot(data)
summary(data)
```

## MetaVAR

```{r}
#| eval = FALSE
dtvar <- FitDTVAR(data)
```

```{r}
summary(dtvar, means = TRUE)
```

```{r}
#| eval = FALSE
metavar <- FitMetaVAR(dtvar)
```

```{r}
summary(metavar)
```

## MLVAR

```{r}
#| eval = FALSE
mlvar <- FitMLVAR(data)
```

```{r}
summary(mlvar)
```

## JAGS

```{r}
#| eval = FALSE
jags <- FitJAGS(data)
```

```{r}
summary(jags)
```
